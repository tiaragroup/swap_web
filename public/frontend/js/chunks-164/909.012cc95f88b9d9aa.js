"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[909],{3909:(t,s,a)=>{a.r(s),a.d(s,{default:()=>i});const e={name:"get-invoice.vue",data:function(){return{orders:[],is_shimmer:!1,loading:!1}},mounted:function(){this.getInvoices()},components:{shimmer:a(5662).Z},computed:{shimmer:function(){return this.$store.state.module.shimmer}},methods:{getInvoices:function(){var t=this;this.$Progress.start();var s=this.getUrl("user/get-invoices/"+this.$route.params.trx_id);axios.get(s).then((function(s){if(t.is_shimmer=!0,s.data.error)t.$Progress.fail(),toastr.error(s.data.error,t.lang.Error+" !!");else{t.$Progress.finish(),s.data.guest||t.$store.dispatch("user",s.data.user),t.$store.dispatch("compareList",s.data.compare_list),t.$store.dispatch("wishlists",s.data.wishlists);var a=s.data.orders;if(t.orders=a,a){for(var e=0;e<a.length;e++)t.payment_form.sub_total+=a[e].total_amount,t.payment_form.discount_offer+=a[e].discount,t.payment_form.shipping_tax+=a[e].shipping_cost,t.payment_form.tax+=a[e].total_tax,1==t.settings.coupon_system&&(t.payment_form.coupon_discount+=a[e].coupon_discount),t.trx_id=a[e].trx_id;0==a[0].is_mailed&&t.sendMail(),t.payment_form.total=t.payment_form.sub_total+t.payment_form.tax+t.payment_form.shipping_tax-(t.payment_form.discount_offer+t.payment_form.coupon_discount)}}})).catch((function(s){t.$Progress.finish()}))},sendMail:function(){var t=this.getUrl("user/mail-order/"+this.trx_id);axios.get(t).then((function(t){}))},sendMailSeller:function(){var t=this.getUrl("user/mail-order-seller/"+this.trx_id);axios.get(t).then((function(t){}))},download:function(t,s){var a=this;this.loading=!0,axios.get(this.getUrl("user/invoice/download/"+t),{responseType:"arraybuffer"}).then((function(t){if(a.loading=!1,t.data.error)toastr.error(t.data.error,a.lang.Error+" !!");else{var e=new Blob([t.data],{type:"application/pdf"}),i=document.createElement("a");i.href=window.URL.createObjectURL(e),i.download=s+".pdf",i.click()}})).catch((function(t){a.loading=!1,toastr.error(t.response.statusText,a.lang.Error+" !!")}))}}};const i=(0,a(1900).Z)(e,(function(){var t=this,s=t._self._c;return s("div",{staticClass:"sg-page-content"},[t.is_shimmer?s("section",{staticClass:"after-track-order text-center"},t._l(t.orders,(function(a,e){return s("div",{key:e,staticClass:"container"},[s("div",{staticClass:"invoice_border mt-2"},[s("div",{staticClass:"page-title"},[s("h1",[t._v(t._s(t.lang.thank_you_for_purchase))]),t._v(" "),t.authUser?s("p",[t._v(t._s(t.lang.a_copy_summary_has_been_sent_to)+" "),s("a",{attrs:{href:"mailto"+t.authUser.email}},[t._v(t._s(t.authUser.email))])]):t._e(),t._v(" "),s("h2",[t._v(t._s(t.lang.order_id)+" "+t._s(a.code))])]),t._v(" "),s("div",{staticClass:"step-content"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{staticClass:"text-start",attrs:{scope:"col"}},[t._v(t._s(t.lang.product_name))]),t._v(" "),s("th",{staticClass:"text-end",attrs:{scope:"col"}},[t._v(t._s(t.lang.price))]),t._v(" "),s("th",{staticClass:"text-end",attrs:{scope:"col"}},[t._v(t._s(t.lang.quantity))]),t._v(" "),s("th",{staticClass:"text-end",attrs:{scope:"col"}},[t._v(t._s(t.lang.sub_total))]),t._v(" "),a.tax_method&&"product_base"==a.tax_method.vat_tax_type||!a.tax_method||!a.tax_method.vat_tax_type?s("th",{staticClass:"text-end",attrs:{scope:"col"}},[t._v(t._s(t.lang.tax))]):t._e(),t._v(" "),"product_base"!=a.shipping_method&&a.shipping_method?t._e():s("th",{staticClass:"text-end",attrs:{scope:"col"}},[t._v(t._s(t.lang.shipping_cost))]),t._v(" "),s("th",{staticClass:"text-end",attrs:{scope:"col"}},[t._v(t._s(t.lang.discount))]),t._v(" "),1==a.is_coupon_system_active&&a.coupon_discount>0?s("th",{staticClass:"text-end",attrs:{scope:"col"}},[t._v(t._s(t.lang.coupon_discount))]):t._e(),t._v(" "),s("th",{staticClass:"text-end",attrs:{scope:"col"}},[t._v(t._s(t.lang.total_amount))])])]),t._v(" "),s("tbody",t._l(a.order_details,(function(e,i){return s("tr",{key:"order"+i},[s("td",[s("div",{staticClass:"product-name"},[s("p",[t._v(t._s(e.product_name))]),t._v(" "),s("span",[t._v(t._s(e.variation))])])]),t._v(" "),s("td",{staticClass:"text-end"},[t._v(t._s(t.priceFormat(e.price)))]),t._v(" "),s("td",{staticClass:"text-end"},[t._v(t._s(e.quantity))]),t._v(" "),s("td",{staticClass:"text-end"},[t._v(t._s(t.priceFormat(e.price))+"\n                      X "+t._s(e.quantity)+"\n                      = "+t._s(t.priceFormat(e.price*e.quantity)))]),t._v(" "),a.tax_method&&"product_base"==a.tax_method.vat_tax_type||!a.tax_method||!a.tax_method.vat_tax_type?s("td",{staticClass:"text-end"},[e.tax>0?s("span",[t._v("\n                        "+t._s(t.priceFormat(e.tax))+" X "+t._s(e.quantity)+"\n                                                    = "+t._s(t.priceFormat(e.tax*e.quantity))+"\n                      ")]):s("span",[t._v("\n                        "+t._s(t.priceFormat(e.tax*e.quantity))+"\n                      ")])]):t._e(),t._v(" "),"product_base"!=a.shipping_method&&a.shipping_method?t._e():s("td",{staticClass:"text-end"},[1==e.shipping_cost.depend_on_quantity?s("span",[t._v("\n                        "+t._s(t.priceFormat(e.shipping_cost.per_cost))+"\n                      X "+t._s(e.quantity)+"\n                      = "+t._s(t.priceFormat(e.shipping_cost.total_cost))+"\n                      ")]):t._e(),t._v(" "),s("span",[t._v("\n                        "+t._s(t.priceFormat(e.shipping_cost.total_cost))+"\n                      ")])]),t._v(" "),e.discount*e.quantity>0?s("td",{staticClass:"text-end"},[t._v("\n                      "+t._s(t.priceFormat(e.discount))+"\n                      X "+t._s(e.quantity)+"\n                      = "+t._s(t.priceFormat(e.discount*e.quantity))+"\n                    ")]):s("td",{staticClass:"text-end"},[t._v(t._s(t.priceFormat(0)))]),t._v(" "),1==a.is_coupon_system_active&&a.coupon_discount>0?s("td",{staticClass:"text-end"},[t._v(t._s(t.priceFormat(e.coupon_discount.discount)))]):t._e(),t._v(" "),s("td",{staticClass:"text-end"},[t._v(t._s(t.priceFormat(parseFloat(e.price)*e.quantity+parseFloat(e.tax)*e.quantity+parseFloat(e.shipping_cost.total_cost)-(parseFloat(e.discount)*e.quantity+parseFloat(e.coupon_discount.discount)))))])])})),0)])]),t._v(" "),s("div",{staticClass:"account-table"},[s("div",{staticClass:"title"},[s("h1",[t._v(t._s(t.lang.account_details))])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table text-start"},[s("tbody",[s("tr",[s("td",[s("ul",{staticClass:"global-list"},[s("li",[t._v(t._s(t.lang.order_code)+" ")]),t._v(" "),t.authUser?s("li",[t._v(t._s(t.lang._name)+" ")]):t._e(),t._v(" "),t.authUser?s("li",[t._v(t._s(t.lang._email))]):t._e(),t._v(" "),s("li",[t._v(t._s(t.lang.shipping_address))]),t._v(" "),s("li",[t._v(t._s(t.lang.billing_address))])])]),t._v(" "),s("td",[s("ul",{staticClass:"global-list"},[s("li",[t._v(t._s(a.code))]),t._v(" "),t.authUser?s("li",[t._v(t._s(t.authUser.full_name))]):t._e(),t._v(" "),t.authUser?s("li",[t._v(t._s(t.authUser.email))]):t._e(),t._v(" "),s("li",[t._v(t._s(a.shipping_address.address))]),t._v(" "),s("li",[t._v(t._s(a.billing_address.address))])])]),t._v(" "),s("td",[s("ul",{staticClass:"global-list"},[s("li",[t._v(t._s(t.lang.order_date))]),t._v(" "),s("li",[t._v(t._s(t.lang.order_status))]),t._v(" "),s("li",[t._v(t._s(t.lang.payment_status))]),t._v(" "),s("li",[t._v(t._s(t.lang.payment_type))])])]),t._v(" "),s("td",[s("ul",{staticClass:"global-list"},[s("li",[t._v(t._s(a.date))]),t._v(" "),s("li",{staticClass:"text-capitalize"},[t._v(t._s(a.delivery_status))]),t._v(" "),s("li",{staticClass:"text-capitalize"},[t._v(t._s(a.payment_status))]),t._v(" "),s("li",{staticClass:"text-capitalize"},[t._v(t._s(a.payment_type.replaceAll("_"," ")))])])])])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 offset-md-8"},[s("div",{staticClass:"order-summary"},[s("div",{staticClass:"sg-card"},[s("ul",{staticClass:"global-list"},[s("li",[t._v(t._s(t.lang.subtotal)+" "),s("span",[t._v(t._s(t.priceFormat(a.sub_total)))])]),t._v(" "),"before_tax"==a.tax_type||"product_base"==a.vat_tax_type?s("li",[t._v(t._s(t.lang.tax)+" "),s("span",[t._v(t._s(t.priceFormat(a.total_tax)))])]):t._e(),t._v(" "),s("li",[t._v(t._s(t.lang.discount)),s("span",[t._v(t._s(t.priceFormat(a.discount)))])]),t._v(" "),"area_base"!=t.settings.shipping_cost||"cart"!=t.$route.name?s("li",[t._v(t._s(t.lang.shipping_cost)),s("span",[t._v(t._s(t.priceFormat(a.shipping_cost)))])]):t._e(),t._v(" "),1==t.settings.coupon_system?s("li",[t._v(t._s(t.lang.coupon_discount)),s("span",[t._v(t._s(t.priceFormat(a.coupon_discount)))])]):t._e()]),t._v(" "),"after_tax"==t.settings.tax_type&&"order_base"==t.settings.vat_and_tax_type?s("div",{staticClass:"order-total text-left"},[s("p",{staticClass:"font_weight_400"},[t._v(t._s(t.lang.total)+" "),s("span",[t._v(t._s(t.priceFormat(parseFloat(a.sub_total)+parseFloat(a.shipping_cost)-(parseFloat(a.coupon_discount)+parseFloat(a.discount)))))])]),t._v(" "),s("p",{staticClass:"font_weight_400"},[t._v(t._s(t.lang.tax)+" "),s("span",[t._v(t._s(t.priceFormat(a.total_tax)))])]),t._v(" "),s("p",{staticClass:"grand_total_style"},[t._v(t._s(t.lang.grand_total)+" "),s("span",[t._v(t._s(t.priceFormat(a.total_payable)))])])]):s("div",{staticClass:"order-total"},[s("p",[t._v(t._s(t.lang.total)+" "),s("span",[t._v(t._s(t.priceFormat(a.total_payable)))])])])])])])])])])]),t._v(" "),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-lg-12"},[t.loading?s("loading_button",{attrs:{class_name:"btn btn-primary"}}):s("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.download(a.id,a.code)}}},[t._v(t._s(t.lang.download)+" "+t._s(t.lang.invoice))])],1)])])})),0):t.shimmer?s("section",[s("div",{staticClass:"container"},[s("div",{staticClass:"page-title"},t._l(3,(function(t,a){return s("shimmer",{key:a,staticClass:"mb-3",attrs:{height:20}})})),1),t._v(" "),s("table",{staticClass:"table"},[s("div",{staticClass:"step-content"},[s("div",{staticClass:"table-responsive"},[s("shimmer",{attrs:{height:50}})],1),t._v(" "),s("div",{staticClass:"account-table"},[s("div",{staticClass:"table-responsive"},[s("shimmer",{attrs:{height:155}})],1)])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 offset-md-8"},[s("shimmer",{attrs:{height:288}})],1)])])]):t._e()])}),[],!1,null,null,null).exports},5662:(t,s,a)=>{a.d(s,{Z:()=>i});const e={name:"shimmer.vue",props:["height"],data:function(){return{style:{height:this.height+"px"}}}};const i=(0,a(1900).Z)(e,(function(){var t=this;return(0,t._self._c)("img",{staticClass:"shimmer",style:[t.height?t.style:null],attrs:{src:t.getUrl("public/images/default/preview.jpg"),alt:"shimmer"}})}),[],!1,null,null,null).exports}}]);